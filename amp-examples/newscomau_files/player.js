/* player - v2.0.11 - release_2.0.11-1 - Mon Dec 12 2016 15:35:07 GMT+1100 (AEDT) */
!function(){var e,t,n,o,a,r,i,s,l,c,u,d,f,p,m,v,g,y,h,b,C,E,N,T,S,I,_,A,w,P,j,D,L,M,x,O,k,q,R,B,U,H,V,F,W,G,z,K,Q,J,Y,X,Z,ee,te,ne,oe,ae,re,ie,se,le,ce,ue,de,fe,pe;!function(me,ve,ge,ye,he){e=function(){var e=function(){var e=me.location.search.substr(1).split("&");if(""===e)return{};for(var t={},n=0;n<e.length;++n){var o=e[n].split("=",2);1===o.length?t[o[0]]="":t[o[0]]=decodeURIComponent(o[1].replace(/\+/g," "))}return t};return e()}(),t={jsPath:"//79423.analytics.edgekey.net/js/brightcove-csma.js",xmlPath:{sit:{"http:":"//ma1063-r.analytics.edgesuite.net/config/beacon-9018.xml","https:":"//ma1063-r.analytics.edgekey.net/config/beacon-9019.xml"},uat:{"http:":"//ma1063-r.analytics.edgesuite.net/config/beacon-9018.xml","https:":"//ma1063-r.analytics.edgekey.net/config/beacon-9019.xml"},prod:{"http:":"//ma1063-r.analytics.edgesuite.net/config/beacon-8665.xml","https:":"//ma1063-r.analytics.edgekey.net/config/beacon-8771.xml"}}},n=function(){var e={accountId:"4132705273001",playerId:"f92da3fd-04f6-4eb3-ade5-7e3a87c66c9b",bcScript:"//players.brightcove.net/4132705273001/f92da3fd-04f6-4eb3-ade5-7e3a87c66c9b_default/index.min.js"};return e}(),o={settings:{number:20,base_url:"/",client_token:"8000hura0gxy",platform:"newscorp",access_token:"822e774c42fd15000c8ac038e40c64ad47d494aa85cfb6f2ba8d35be756a2264",api_url:"http://api-se.iris.tv"},abGroup:"b",irisTvEnabledSites:["ntnews","themercury"]},a={VISITOR:{MARKETING_CLOUD_ORG_ID:"5FE61C8B533204850A490D4D@AdobeOrg",TRACKING_SERVER:"newscorpau.sc.omtrdc.net"},APP_MEASUREMENT:{RSID:"",TRACKING_SERVER:"newscorpau.sc.omtrdc.net",VISITOR_ID:""},HEARTBEAT:{TRACKING_SERVER:"newscorpau.hb.omtrdc.net",PUBLISHER:"5FE61C8B533204850A490D4D@AdobeOrg"},REPORTINGSUITE:{NEWS:"newscorpau-global",NEWS_DEV:"newslimited-dev",NLM:"newscorpau-nlmglobal",NLM_DEV:"newscorpau-nlmglobal-dev"}},r={playerBrandingId:"486c0d047bbe4823a12ababd8c14f818",pcode:"psd3E6XyIKAqm-nEehdefzUP6tfH"},i=function(e){var t,n=ve.getElementsByTagName("script");e||(e=ye||"player.js");for(var o=n.length-1;o>=0;--o){var a=n[o].src.split("?")[0],r=a.length,i=e.length;a.substr(r-i)===e&&(t=a.substr(0,r-i))}return t},s=function(e,t,n,o,a,r,i){for(var s={goldcoastbulletin:"couriermail",ntnews:"couriermail",themercury:"heraldsun",townsvillebulletin:"couriermail",weeklytimesnow:"heraldsun"},l=["adelaidenow","cairnspost","couriermail","dailytelegraph","geelongadvertiser","goldcoastbulletin","heraldsun","news","ntnews","perthnow","theaustralian","themercury","townsvillebulletin","weeklytimesnow"],c=["escape"],u=["bestrecipies","bodyandsoul","buro247","carsguide","delicious","gq","homelife","insideout","kidspot","vogue","taste","whimn"],c=c.concat(u),l=l.concat(c),d=["taste","delicious"],f=e.domain||me.location.hostname.replace(/(^(www|m|video|w|mobile|extra)\.|\.com(\.au)?$)/gi,""),p=/^sit|sit$/i.test(f)||/^dev.resources/i.test(me.location.hostname),m=/^uat|uat$/i.test(f)||/^uat.resources/i.test(me.location.hostname),f=f.match(/^[\d\.]+$/)||"localhost"===f?"news":f,f=f.replace(/^sit|sit$/i,"").replace(/^\.|\.$/i,""),v=e.debug&&"true"===e.debug,g=e.player&&"dev"===e.player||"goldcoastbulletin"===f,y=u.indexOf(f)!==-1,h=c.indexOf(f)!==-1,b=0;b<l.length;b++)if(f.indexOf("."+l[b]+".")>=0){f=l[b];break}l.indexOf(f)<0&&(f="news");var C=d.indexOf(f)!==-1;p&&(o.settings.isSit=!0),o.irisTvEnabledSites.indexOf(f)!==-1&&(o.enabled=!0),(v||p)&&(n.bcScript=n.bcScript.replace(".min",""));var E={playerData:n,irisTvConfig:o,heartbeatConfig:a,akamaiAnalyticsConfig:t,ooyalaConfig:r,apiKey:{prod:"hmbas9m9untxy94398rw696k",sit:"nbggb6jxgbf3eftej3sfc42a",uat:"nbggb6jxgbf3eftej3sfc42a"},adcmsid:"3791",adOutputType:"xml_vast3",prerollTimeout:4200,maxAttemptsToGetAdsReady:5,hostname:"www."+f+".com.au",domain:f,blockContinuousPlay:C,isSit:p,env:p?"sit":m?"uat":"prod",vcmLegecyConfig:s,urlParams:e,debug:v,abTestingCookieName:"abtestinggroup",relatedVideoAbGroup:"b",isMobile:/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),IS_IOS:/iPad|iPhone|iPod/i.test(navigator.userAgent),basePath:i(),playerCss:i()+"player_controls.css",devPlayer:g,urlMashery:"http://cdn.newsapi.com.au/",url3scale:"http://cdn.newsapi.com.au/",isNLM:y,isNonMasthead:h};return E}(e,t,n,o,a,r,i),l=function(e,t){var n="_video_jsonp_"+Math.round(1e5*Math.random()),o=ve.createElement("script");o.src=e+(e.indexOf("?")>=0?"&":"?")+"callback="+n,o.async=!0,o.onerror=function(){t()},me[n]=function(e){ve.getElementsByTagName("head")[0].removeChild(o);try{delete me[n]}catch(e){me[n]=he}t(e)},ve.getElementsByTagName("head")[0].appendChild(o)},c=function(e,t){return function(n,o){var a,r=e.vcmLegecyConfig[e.domain]||e.domain,i="//video."+r+".com.au/vcmslegacy?cfg="+n.className;t(i,function(e){if(e&&!e.error){var t=e.className.replace("vms-embedCode","vms-embedcode");a=t.match(/vms-embedcode-[^\s]+/i)[0].split("-")[2],n.innerHTML=e.html,n.className=t,n.setAttribute("vms-embedcode",a)}else console.error("Error",e.error||"");o(a)})}}(s,l),u=function(e){var t=e.querySelectorAll(".content-item");if(t.length)for(var n=0;n<t.length;n++){var o=t[n];o&&o.parentNode&&o.parentNode.removeChild(o)}var a=e.querySelector(".heading a");if(a){var r=a.innerText||a.innerHTML,i=a.parentNode;if(i.removeChild(a),i.appendChild(ve.createTextNode(r)),!e.className.match(/\bvms-embedcode-[^\s]+\b/)&&a.getAttribute("href")){var s=a.getAttribute("href").match(/\/video\/id-(.*?)\//i);s&&(e.className+=" vms vms-embedcode-"+s[1])}}},d=function(e){var t,n={};try{e=JSON.parse(e)}catch(e){return console.error("Cannot parse JSON object of vms playlist"),!1}return e.collection_id?n.playlistInternal=e.collection_id:e.category&&(t=e.category.match(/^\/?video\/(.*?)\/(collection\/popular-content\/)?(.*?)(24hours|7days|30days)?$/i),t[1]&&(n.domain=t[1]),t[3]&&(n.category=t[3]),t[4]&&(n.popular=t[4])),e.pageSize?n.count=parseInt(e.pageSize,10):e.maxRelated&&(n.count=parseInt(e.maxRelated,10)),n.source=e.site||e.originalSource,n.site=e.site,n.disable_play_all=e.disable_play_all||0,n},f=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+"="+e[n]);return t.join("&")},p=function(){function e(t){var n=new Date(t).getTime()/1e3;if(n<=0){if(t.replace&&(t=t.split(/[\:\T\-]|(\.\d+)/),t.length>2)){var o=new Date;return o.setYear(t[0]),o.setMonth(t[1]-1),o.setDate(t[2]),o.setHours(t[3]+parseInt(t[6],10)),o.setMinutes(t[4]),o.setSeconds(t[5]),e(o)}return null}return n}var t=3600,n=86400,o=604800,a=2419200,r=31536e3;return function(i,s){if(!i||i<r)return"";var l=e(i);if(s=e(s||new Date),!l||!s)return"";var c=s-l,u=0,d="";return c<300?"new":(c<t?(u=parseInt(c/t*60,10),d="minute"):c<n?(u=parseInt(c/n*24,10),d="hour"):c<o?(u=parseInt(c/o*7,10),d="day"):c<a?(u=parseInt(c/a*4,10),d="week"):c<r?(u=parseInt(c/r*12,10),d="month"):(u=parseInt(c/r,10),d="year"),u=u||1,u+" "+d+(u>1?"s":"")+" ago")}}(),m=function(e){if(isNaN(e))return e;if(!e)return"";var t,n=e,o=Math.floor(n/3600),a=n%3600,r=Math.floor(a/60),i=parseInt(n%60,10);return i=(i<10?"0":"")+i,o?(r=(r<10?"0":"")+r,t=o+":"+r+":"+i):t=r+":"+i,t},v=function(e,t,n,o,a){return function(r,i,s,l){i.api_key=e.apiKey[e.env],t("//www.news.com.au/remote/jsonp-proxy.esi?url=http://cdn.newsapi.com.au"+r.replace("?","&")+"&"+n(i),function(t){/popular-content/i.test(i.category)&&(t.results=[t.results[0]]);var n=function(t){var n={};if(t){for(var o=0;o<t.length;o++){var a=t[o];a.imageType&&(n[a.imageType.toLowerCase()]=a.link)}var r=function(t){return t.replace(e.urlMashery,e.url3scale)};return"prod"!==e.env&&(n.hero=r(n.hero),n.thumbnail=r(n.thumbnail)),n.hero||n.thumbnail||n.source}},c=function(e){var t=e;t.images&&(t.thumbnail=n(t.images)),t.dateLive&&(t.age=o(t.dateLive)),t.duration&&(t.capiDuration=t.duration/1e3,t.duration=a(t.duration/1e3));for(var r=0;r<t.categories.length;r++)t.categories[r]=t.categories[r].value.replace(/(^\/+|\/+$)/gi,"").split("/").pop();return t},u=function(e){if(!e)return console.error("No results returned",r),{};for(var t=e.results||e.related,n=0;n<t.length;n++){var o=t[n];if("COLLECTION"===o.contentType)return u(o);o.index=n,o=c(o),t[n]=o}return t},d=u(t);s(d,l)})}}(s,l,f,p,m),g=function(){function e(e,i,s){return e=e.replace(o,function(e,o,a,r,s){return n[o](t(r,i),i,s)||""}),e=e.replace(a,function(e,o,a,r,s){return n[o](t(r,i),i,s)||""}),e=e.replace(r,function(e,n){return t(n,i,s)||""})}function t(e,n,o){var a=e.split("."),r=a.shift();return r?n===he?"":(r.match(/^\d+$/)?n=n[parseInt(r,10)]:"$index"===r?n=o:"$value"!==r&&(n=n[r]),t(a.join("."),n)):n||""}var n={each:function(t,n,o){var a="";if("object"==typeof t)for(var r in t)t.hasOwnProperty(r)&&(a+=e(o,t[r],r));return a}},o=/\{\{([^\s]+?)([0-9]?)\s(.*?)\}\}([\s\S]*?)\{\{\/\1\2\}\}/gi,a=/\{\{([a-z]+?)([0-9]?)\!(.*?)\}\}/gi,r=/\{\{([^\s]+?)\}\}/gi;return function(t,n){n=n||{};var o=ve.createDocumentFragment(),a=ve.createElement("div");for(a.innerHTML=e(t,n);a.childNodes.length;)o.appendChild(a.childNodes[0]);return o}}(),y={load:function(e){throw new Error("Dynamic load not allowed: "+e)}},h='<div class="vms-playlist vms-list-line vms-thumbnail">\n\t\n</div>',b='<button class="vms-button vms-list-prev icon-chevron-left vms-icon theme-background-color"></button>\n<div class="vms-list">\n</div>\n<a class="vms-more" href="javascript:void(0);">More</a>\n<button class="vms-button vms-list-next icon-chevron-right vms-icon theme-background-color"></button>',C='<div class="module vms-list-item vms-embedcode-{{ooyalaId}}" vms-embedCode="{{ooyalaId}}" index="{{index}}">\r\n\t<div class="module-header vms-header">\r\n\t\t<h3 class="heading">{{title}}\r\n\t\t\t<span class="time">{{duration}}</span>\r\n\t\t</h3>\r\n\t</div>\r\n\r\n\t<div class="module-content">\r\n\t\t<div class="poster">\r\n\t\t\t<img alt="{{title}}" src="{{thumbnail}}"/>\r\n\t\t</div>\r\n\t\t<div class="description">\r\n\t\t\t<p>{{description}}</p>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="module-footer vms-footer">\r\n\t\t<ul class="info">\r\n\t\t\t<li class="source">{{originalSource}}</li>\r\n            <li class="subsource">{{originalSource}}</li>\r\n            <li class="date">{{date}}</li>\r\n            <li class="parentcategory">{{categories.0}}</li>\r\n\t\t\t<li class="age">{{age}}</li>\r\n\t\t\t<li class="category">\r\n\t\t\t\t{{each categories}}\r\n\t\t\t\t\t<span class="cat-{{$index}}">{{$value}}</span>\r\n\t\t\t\t{{/each}}\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t</div>\r\n\r\n</div>',E=function(){var e=[];return e.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}}(),N=function(){var e="ontouchstart"in me||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0;return ve.documentElement.className+=" "+(e?"":"no-")+"touch",e}(),T=function(e,t){function n(t,n,o){for(var a=(t||"").split(r),i=n.split(r),s=0;s<i.length;s++){var l=e(a,i[s]);!o&&l===-1&&i[s]?a.push(i[s]):(!i[s]||o&&l>-1)&&a.splice(l,1)}return a.join(r)}var o,a,r=" ",i=function(){return function(e,t){var o=n(e.className,t);e.className!==o&&(e.className=o)}}(),s=function(){return function(e,t){var o=n(e.className,t,!0);e.className!==o&&(e.className=o)}}(),l=/[\s\,]+/;return ve.addEventListener?(o=function(e,n,o){t&&"click"===n&&e.getAttribute&&!e.getAttribute("onclick")&&e.setAttribute("onclick","void(0);"),e.addEventListener(n,o)},a=function(e,t,n){e.removeEventListener(t,n)}):(o=function(e,t,n){e.attachEvent("on"+t,function(t){t.preventDefault||(t.preventDefault=function(){t.returnValue=!1}),t.stopPropagation||(t.stopPropagation=function(){t.cancelBubble=!0}),t.target||(t.target=t.srcElement),n.call(e,t)})},a=function(e,t,n){e.detachEvent("on"+t,n)}),function(e,t){var n=[];if(t=t||ve,"string"==typeof e&&(e=t.querySelectorAll(e)),me.NodeList&&e instanceof me.NodeList||e&&"object"==typeof e&&"length"in e&&!e.tagName&&e!==me)for(var r=0;r<e.length;r++)n.push(e[r]);else n.push(e);return n.addClass=function(e){return n.each(function(t){i(t,e)}),n},n.removeClass=function(e){return n.each(function(t){s(t,e)}),n},n.on=function(e,t){return n.each(function(n){for(var a=e.split(l),r=0;r<a.length;r++)o(n,a[r],t)}),n},n.off=function(e,t){return n.each(function(n){for(var o=e.split(l),r=0;r<o.length;r++)a(n,o[r],t)}),n},n.each=function(e){for(var t=0;t<n.length;t++)e.call(n[t],n[t],t)},n.attr=function(e){var t=n[n.length-1];return t.getAttribute(e)},n}}(E,N),S=me.getComputedStyle||function(){return{}},I=function(e){var t=function(t,n){n=0===arguments.length||!!n;var o=t.parentNode,a=e(o,null),r=parseInt(a.borderTopWidth,10)||0,i=parseInt(a.borderLeftWidth,10)||0,s=t.offsetTop-o.offsetTop<o.scrollTop,l=t.offsetTop-o.offsetTop+t.clientHeight-r>o.scrollTop+o.clientHeight,c=t.offsetLeft-o.offsetLeft<o.scrollLeft,u=t.offsetLeft-o.offsetLeft+t.clientWidth-i>o.scrollLeft+o.clientWidth,d=s&&!l;(s||l)&&n&&(o.scrollTop=t.offsetTop-o.offsetTop-o.clientHeight/2-r+t.clientHeight/2),(c||u)&&n&&(o.scrollLeft=t.offsetLeft-o.offsetLeft-o.clientWidth/2-i+t.clientWidth/2),(s||l||c||u)&&!n&&t.scrollIntoView(d)};return function(e){e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded(!0):t(e,!0)}}(S),_=function(){var e=function(e){return e},t=Date.now||function(){return(new Date).getTime()};return function(n,o,a){function r(){var e=(t()-i)/n;e>=1&&(e=1),a(o(e)),e<1&&requestAnimationFrame(r)}a||(a=o,o=e);var i=t();r()}}(),A=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},w=function(e,t,n){return function(o){var a,r,i=this,s=i.children,l=i.offsetWidth,c=i.offsetHeight,u=i.scrollTop+o*i.offsetTop*2,d=i.scrollLeft+o*i.offsetLeft*2,f=-o+1?0:s.length-1,p=s.length,m=i.scrollLeft,v=o*l+d,g=i.scrollTop,y=o*c+u;for(o<0&&d<=0?a=i.scrollWidth-l:o>0&&m+l===i.scrollWidth&&(a=-i.scrollLeft);f<p&&f>=0;f+=-o){var h=s[f];!r&&(h.offsetTop-y)*o>0?(y=h.offsetTop-parseInt(n(h,null).marginTop||0,10),r=y-g):!a&&(h.offsetLeft-v)*o<=0&&(v=h.offsetLeft-parseInt(n(h,null).marginLeft||0,10),a=v-m)}a&&e(300,t,function(e){i.scrollLeft=m+e*a}),r&&e(300,t,function(e){i.scrollTop=g+e*r})}}(_,A,S),P=function(e,t,n,o){function a(t){var n=t.parentNode,o=0,a=t.scrollWidth-t.offsetWidth,r=t.scrollHeight-t.offsetHeight,i=a*a<4&&r*r<4;t.scrollLeft?(o=t.scrollLeft-t.offsetLeft,i=Math.abs(t.scrollLeft+t.offsetWidth-t.scrollWidth)<1):t.scrollTop&&(o=t.scrollTop-t.offsetTop,i=Math.abs(t.scrollTop+t.offsetHeight-t.scrollHeight)<1);var s=e(n).removeClass("vms-scroll-start vms-scroll-end vms-scroll-middle");o<=0&&s.addClass("vms-scroll-start"),i&&s.addClass("vms-scroll-end"),!i&&o&&s.addClass("vms-scroll-middle")}return e(ve).on("click",function(e){var t,n,r=e.target;if(n=r.className&&r.className.match&&r.className.match(/vms-list-(prev|next)/),"string"==typeof r.className&&n){t=n,e.preventDefault();var i=r.parentNode.querySelector(".vms-list");o.call(i,"next"===t[1]?1:-1),setTimeout(function(){a(i)},1e3)}}),function(t){var n=t.querySelector(".vms-list");a(n),e(n).on("scroll",function(){a(n)})}}(T,E,I,w),j=function(e){var t,n=e.domain||"video.news.com.au",o={};return t=("sit"===s.env?"/sit":"")+"/content/v2/",o.pageSize=e.count||20,o.offset=0,e.category?(e.category=e.category.replace(/(^\/+|\/+$)/,""),e.category=e.category.replace(/\//g,"\\/"),e.category=e.category.replace(/ /g,"*")):e.category+="all",e.playlistInternal?t=t+"collection/"+e.playlistInternal:e.playlist?t+="origin:video_integrator."+e.playlist:e.popular?(o.query="categories.value:\\/video\\/"+n+"\\/collection\\/popular-content\\/"+e.category+"\\/"+e.popular+"*  AND origin:OMNITURE",o.includeRelated=!0,o.includeBodies=!1,o.maxRelated=e.count,delete o.pageSize):o.query="categories.value:"+("\\/video\\/"+n+"\\/"+e.category).toLowerCase()+"*",e.site&&(o.site=e.site),{path:t,qs:o}},D=function(e,t,n,o,a,r,i){return function(s,l,c){var u=function(e,t,n,o){e.addEventListener("click",function(e){e.preventDefault();var a=videojs.players[n];a&&a.trigger({type:"playlistItemClick",options:t,el:o})})},d=function(e,i){if(!e.length)return console.error("vms playlist has no results to display",i),!1;var l,d=t(o,{}),f=d.querySelector(".vms-list");l=t(n,{}),l.firstChild.appendChild(d),i.appendChild(l),r.call(this,i);for(var p,m,v=0;v<e.length;v++){var g=e[v],y=t(a,g);if(0===v){m=g.ooyalaId,p=y.firstChild.cloneNode(!0),p.className=p.className.replace("vms-list-item","")+" vms vms-playlist",s.disable_play_all&&(p.className+=" vms-disable-play-all");var h=y.firstChild.querySelector(".poster");h.className+=" theme-border-color theme-background-color"}g.playlistItemEl=y.firstChild,u(y.firstChild,g,m,p),e[v]=g,f.appendChild(y)}var b=ve.createElement("div");b.appendChild(p),i.insertBefore(b,i.firstChild);var C=me.vmsPlaylist||{};C[m]={el:p,results:e},me.vmsPlaylist=C,c(m)}.bind(this),f=i(s);e(f.path,f.qs,d,l)}}(v,g,h,b,C,P,j),L=function(e,t){return{createPlaylist:function(n,o){var a=n.getAttribute("data-vms-playlist"),r={};return!(!a&&n.className.indexOf("vms-playlist-loaded")>-1)&&(n.className+=" vms-playlist-loaded",r=e(a),void t(r,n,o))}}}(d,D),M=function(e){return e instanceof Array},x=function(e){try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}},O=function(e){return"[object Object]"===Object.prototype.toString.call(e)},k=function(e,t,n){return function(o,a){function r(i){if(!e(i))return void r(Array.prototype.slice.call(arguments,0));for(var s,l=0;l<i.length;l++){var c=i[l];"function"==typeof c?c(r):n(c)&&c.embedCode?a(c):t(c)?(s=n(i[l+1])?i[++l]:{},s.embedCode=c,a(s)):e(c)?r(c):console.error(o+"[]; Expects a DOM object, Function or Array",c)}}me[o]&&r(me[o]),me[o]=me[o]||[],me[o].push=function(){r(Array.prototype.slice.call(arguments,0))}}}(M,x,O),q=function(e,t){function n(e){var t=[];for(e&&e.length>0?t=e:t.push("News");t.length>4;)t.pop();return t}function o(e,o){e=e||{},e.ap=e.isAutoplayable?"on":"off",delete e.isAutoplayable;for(var a=n(o),r=0;r<a.length;r++)e["vsec"+Number(r+1)]=a[r];e.pos=1;var i=videojs.mergeOptions(e.advancedTargeting);if(i){delete e.advancedTargeting,i.ksgmnt&&(i.ksgmnt=i.ksgmnt.toString()),delete i.kw;for(var s in i)i.hasOwnProperty(s)&&(e[s]=i[s])}return encodeURIComponent(t(e))}function a(n){var a=me.encodeURIComponent(me.location.href),r={gdfp_req:1,impl:"s",output:e.adOutputType,unviewed_position_start:1,url:a,correlator:"[timestamp]",hl:"en",cmsid:e.adcmsid,vid:n.embedCode,iu:n.iu,sz:n.size||"450x50",description_url:a,cust_params:o(n.custParams,n.categories),ad_rule:1},i="/adx";if("ads"===n.calltype){var s="427x240";n.isLongform&&(s="640x360"),r=videojs.mergeOptions(r,{env:"vp",sz:s}),i="/ads"}var l="http://pubads.g.doubleclick.net/gampad"+i+"?"+t(r);return l}return function(e){return a(e)}}(s,f),R=function(e){var t,n=ve.querySelectorAll("body.story, body.article, #articlecontainer, #articlestory, #article-comments");return n.length>0?t="single player":(n=e.className.match(/archive/i),n?t="hub player":(n=ve.querySelectorAll(".vms-standalone"),t=n.length?"embed":"other")),t},B=function(e,t,n){return function(o,a,r,i,s,l){if(!me.ads_api)return console.error("Video Player: No ads api defined yet. Did we load up too fast?"),!1;var c=t({categories:i,iu:me.ads_api&&me.ads_api.uname||"",embedCode:o,calltype:"ads",isLongform:a,custParams:{isAutoplayable:r,vsite:e.domain,prod:"video",pltype:n(s),advancedTargeting:me.ads_api&&me.ads_api.targeting||{},ph:l.height(),pw:l.width()}});return c}}(s,q,R),U=function(){me._ima3queue=me._ima3queue||[];var e=function(t){console.log("processing ima3 queue",t.player.id()),t.callback(),t.player.ima3.ready(function(){setTimeout(function(){me._ima3queue.splice(0,1),me._ima3queue.length>0?e(me._ima3queue[0]):console.log("finished processing ima3 queue")},0)})},t=function(t,n){console.log("adding player to ima3 queue",t.id()),me._ima3queue.push({player:t,callback:n}),1===me._ima3queue.length&&e(me._ima3queue[0])};return{addToQueue:t}},H=function(e,t,n,o){var a=n||1e3,r=o||10,i=!1;if(e())return t(),i=!0,!1;var s=setInterval(function(){if(0===r&&e())clearInterval(s);else{if(--r,!e()||i)return;clearInterval(s),t(),i=!0}},a)},V=function(e,t,n,o){return function(a,r,i){var s=n(),l=function(n,o,l,c){var u=t(n,o,l,c,r,a),d={serverUrl:u,adTechOrder:["html5","flash"],vpaidMode:"ENABLED",hardTimeouts:!1,prerollTimeout:e.prerollTimeout,loadingSpinner:!0,requestMode:"onload",adSwf:"//players.brightcove.net/videojs-ima3/2/videojs.ima3.swf",debug:!1};i.isLongform&&(d.requestMode="onplay"),e.debug&&(d.debug=!0,videojs.log("adUrl",a.id(),u)),s.addToQueue(a,function(){a.ima3(d)})};a.one("loadstart",function(){o(function(){return"undefined"!=typeof me.ads_api},function(){l(i.embedCode,i.isLongform,!1,i.categories)},1e3,e.maxAttemptsToGetAdsReady)})}}(s,B,U,H),F=function(e,t,n){var o=t.el,a=t.embedCode||e.getEmbedCode(),r=function(e){var t=o.querySelector(".module-content .right-floater"),n=o.querySelector(".module-content .description"),a=ve.createElement("div");if(!n)return!1;me.videojs.addClass(o,"vms-longform");var r=ve.createElement("div");r.className="featured",r.innerHTML="Featured Video",o.insertBefore(r,o.firstChild),t&&t.parentNode.removeChild(t),a.className="right-floater",a.innerHTML='   <div class="subsource-'+e+'"></div>   <div class="more-video">       <a href="/video">More videos</a>   </div>',n.parentNode.insertBefore(a,n)},i=function(){var e=o.querySelector(".module-content .right-floater"),t=o.querySelector(".featured");e&&(e.parentNode.removeChild(e),t.parentNode.removeChild(t)),me.videojs.removeClass(o,"vms-longform")},s=function(){var t={code:"ERROR_EMBED_NOT_ALLOWED",headline:'You can view this player on <a target="_blank" href="//'+n+'.com.au/video">'+n+".com.au</a>."};e.on("loadstart",function(){e.bigPlayButton.hide(),e.error(t)})};e.ooyala.getMetadata(a,function(t,n){var o=n&&n[a];if(o&&o.sub_provider){var l=o.sub_provider.toLowerCase();e.isEmbedded?s():r(l)}else i()})},W=function(e){return function(t,n,o,a){var r=n.querySelector(".heading");r&&(r.innerHTML=o.title+'<span class="time">'+me.videojs.formatTime(t.getCapiDuration())+"</span>");var i=o.description;"undefined"!==i&&"null"!==i||(i="");var s=n.querySelector(".description p");s&&(s.innerHTML=i);var l=n.querySelector(".info .date");l&&(l.innerHTML=a.date),e(t,{el:n,options:{embedCode:a.ooyalaId}})}}(F),G=function(e,t,n){return function(o,a){o.on("upNextPlaylistItemClick",function(r){function i(e){for(var t,n=[],o=0;o<e.length;++o)e[o]!==he&&(t={},t.time=e[o],n.push(t));return n}var s;try{s=r.metadata&&JSON.parse(r.metadata)}catch(e){return!1}if(!s)return!1;if(o.playOrder++,o.trigger({type:"preUpNextPlaylistItemClick"}),o.playedFromUpNextPlaylist=!0,o.startedByCountdown=r.videoWasEnded,s.image&&o.poster(s.image),s.categories)for(var l=0;l<s.categories.length;l++)s.categories[l]=s.categories[l].value.replace(/(^\/+|\/+$)/gi,"").split("/").pop();var c=t(s.ooyalaId,s.isLongform,!1,s.categories,a,o);o.src({src:r.videoSrc,type:r.videoType}),o.ima3.settings.serverUrl=c,o.setTitle(r.title),o.setCapiDuration(s.capiDuration),s.ooyalaId&&o.setEmbedCode(s.ooyalaId),o.setAdCuePoints(s.adCuePoints);var u;o.on("loadedmetadata",function(){s.isLongForm&&(u=i(s.adCuePoints),o.adMarkers.reset(u))}),o.one("loadedmetadata",function(){o.play()}),n(o,a,r,s),o.trigger({type:"socialSharingSettings",settings:{title:r.title,embedCode:s.ooyalaId}}),o.trigger({type:"analyticsSettings",playerModel:{embedCode:s.ooyalaId,title:r.title,source:s.source,playerType:e(a),duration:s.capiDuration,categories:s.categories,playOrder:o.playOrder}});var d=function(){"content-playback"!==o.ads.state&&"content-resuming"!==o.ads.state||(o.trigger({type:"postUpNextPlaylistItemClick",currentTime:o.currentTime(),duration:o.duration(),videoWasEnded:r.videoWasEnded,index:r.index}),o.off("play",d))};o.on("play",d)})}}(R,B,W),z=function(){var e=function(e,t){var n="video/mp4",o="video/flv",a="application/x-mpegURL",r="http://newsdynamicvid-vh.akamaihd.net/i/",i=/(http|https):\/\/([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}\//g,s=",.csmil/master.m3u8";if(!t)return me.videojs.log("Error: Missing ooyala response");var l,c=t.videoUrls&&t.videoUrls[e],u=t.apiResponse,d=u&&u.authorization_data&&u.authorization_data[e],f=[];if(!c||!d)return me.videojs.log("Error: Can not find video source from Ooyala");var p=function(){var e=ve.createElement("video");if(!me.videojs.getComponent("Html5").isSupported())return!1;for(var t=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"],n=0;n<t.length;n++){var o=t[n];if(/maybe|probably/i.test(e.canPlayType(o)))return!0}return!1};return c.type===o||"remote_asset"===c.delivery_type?c:c.type!==n||/\.m3u8/i.test(c.src)?{src:c.src,type:a}:me.videojs.IS_ANDROID&&c.type===n?c:p()||me.videojs.Flash.isSupported()?(d.streams.forEach(function(t){f.push(atob(t.url.data).replace(i,"").replace(e,""))}),1===f.length?c:l={src:r+e+"/,"+f.join(",")+s,type:a}):c};return me.videoSourceSelector=me.videoSourceSelector||e,e}(),K=function(e){return function(t,n,o){var a=o||function(){},r=function(e,n){t.ooyala.getVideoSource(e,n)},i=function(o,r){return o?(t.error({code:o.code,headline:o.headline,message:o.message}),a(),!1):void t.ooyala.prepareSettingSource(n,r,function(o,r){if(o)return t.error({code:o.code,headline:o.headline,message:o.message}),a(),!1;var i=e(n,r);i&&(t.src(i),a())})};r(n,i)}}(z),Q=function(e,t,n,o,a){return function(r,i){var s=me.vmsPlaylist[r.id()],l=s.results,c=s.el,u=0;l||console.error("No playlist found for this player",r.id());var d=function(e){for(var t=ve.querySelectorAll(".vms-list-item .poster"),o=e.querySelector(".poster"),a=0;a<t.length;a++)videojs.removeClass(t[a],"theme-border-color"),videojs.removeClass(t[a],"theme-background-color");videojs.addClass(o,"theme-border-color"),videojs.addClass(o,"theme-background-color"),n(e)},f=function(n,s){if(u=n.index,n.thumbnail&&r.poster(n.thumbnail),n.categories)for(var l=0;l<n.categories.length;l++)n.categories[l]=n.categories[l].replace(/(^\/+|\/+$)/gi,"").split("/").pop();d(n.playlistItemEl);var c=t(n.ooyalaId,!1,!1,n.categories,i,r);a(r,n.ooyalaId),o(r,{el:i,options:{embedCode:n.ooyalaId}}),r.setTitle(n.title),r.setCapiDuration(n.capiDuration),r.setAdCuePoints(n.adCuePoints),n.embedCode&&r.setEmbedCode(n.embedCode),r.playlistDisablePlayAll||(r.ima3.settings.serverUrl=c,r.one("loadstart",function(){r.play()}));var f=s.querySelector(".heading");f&&(f.innerHTML=n.title+'<span class="time">'+me.videojs.formatTime(r.getCapiDuration())+"</span>"),r.trigger({type:"socialSharingSettings",settings:{title:n.title,embedCode:n.ooyalaId}}),r.trigger({type:"analyticsSettings",playerModel:{embedCode:n.ooyalaId,title:n.title,source:n.originalSource||"",playerType:e(i),duration:n.duration,categories:n.categories}})};r.on("playlistItemClick",function(e){f(e.options,e.el),e.options.title&&r.setTitle(e.options.title),e.options.ooyalaId&&r.setEmbedCode(e.options.ooyalaId)}),r.on("ended",function(){return"content-resuming"===r.ads.state&&(!(u+1>=l.length||videojs.IS_IOS||videojs.IS_ANDROID)&&void r.trigger({type:"playlistItemClick",options:l[++u],el:c}))})}}(R,B,I,F,K),J=function(e,t,n){return function(o,a){var r,i,s=a.el,l=a.embedCode,c=a.categories&&a.categories[0];o.omniture({playerModel:{embedCode:l,title:a.title,source:a.source,playerType:t(s),duration:a.duration,categories:a.categories,playOrder:o.playOrder},debug:e.urlParams.debug}),o.nielsen({playerModel:a,domain:e.domain,debug:e.urlParams.debug}),r=e.akamaiAnalyticsConfig.xmlPath[e.env][me.location.protocol],i=o.akamaiAnalytics({configPath:r}),i.setData("title",a.title),i.setData("show",l),i.setData("category",c),o.on("analyticsSettings",function(e){i.setData("title",e.playerModel.title),i.setData("show",e.playerModel.embedCode),i.setData("category",e.playerModel.categories[0])});var u=function(){var n=e.heartbeatConfig,r=me.metrics.s.visitorID,i="prod"===e.env;n.APP_MEASUREMENT.VISITOR_ID=r,e.isNLM?n.APP_MEASUREMENT.RSID=i?n.REPORTINGSUITE.NLM:n.REPORTINGSUITE.NLM_DEV:n.APP_MEASUREMENT.RSID=i?n.REPORTINGSUITE.NEWS:n.REPORTINGSUITE.NEWS_DEV,n.SOURCE=a.source,o.heartbeat({config:n,debug:e.debug,playerName:"NewsCorp Brightcove Video Player",playerModel:{embedCode:l,title:a.title,source:a.source,playerType:t(s)}})};n(function(){return me.metrics&&me.metrics.s&&me.utag_data&&me.utag_data.video_heartbeat&&o.heartbeat},function(){u()},1e3,100)}}(s,R,H),Y=function(e,t){return function(n,o,a){/MSIE 9/i.test(navigator.userAgent)&&videojs.flashls({swfUrl:e.basePath+"swf/videojs-flashls.swf"}),n.ooyala({playerBrandingId:e.ooyalaConfig.playerBrandingId,pcode:e.ooyalaConfig.pcode,enableHls:!0,mobileProfile:"baseline"}),t(n,o,a)}}(s,K),X=function(e,t,n,o,a,r,i){return function(s,l){function c(e){for(var t,n=[],o=0;o<e.length;++o)e[o]!==he&&(t={},t.time=e[o],n.push(t));return n}var u=l.el,d=l.embedCode,f=l.isLongform,p=ve.querySelector("body").className.indexOf("video")>-1;i(s,d,function(){s.trigger({type:"forceVisibilityLoadCheck"}),videojs.addClass(u,"vms"),videojs.addClass(u,"vms-player"),videojs.addClass(u,"vms-ready")}),t(s,u,l),s.isPlaylist?o(s,u):n(s,u),s.countdownAutoplay({autoplay:!p&&l.autoplay&&!/autoplay-off/.test(l.el.className)}),a(s,l,e.domain),s.visibility(),!e.isMobile&&p&&s.socialsharing({title:l.title,embedCode:d,domain:e.domain,basePath:e.basePath}),s.upNextPlaylist&&s.upnextplaylist({continuousPlay:l.continuousPlay}),r(s,l),s.friendlyErrors(),s.progressMarker(),s.volumecontrol();var m;s.one("loadedmetadata",function(){f&&(m=c(s.getAdCuePoints()),s.adMarkersPlugin({adMarkers:m}))}),/MSIE 9/i.test(navigator.userAgent)&&s.on("play",function(){s.flexbox({width:s.width()})})}}(s,V,G,Q,F,J,Y),Z=function(e){var t,n=e.el(),o=function(e,t,n){for(var o=e.parentNode,a=1;a<=n&&o.className&&!o.className.match(t);)o=o.parentNode,a++;return o},a=function(t){t&&(e.pause(),e.ima3&&e.ima3.adPlayer&&e.ima3.adPlayer.pause())};if(t=o(n,"tab-content",4),t&&t.className&&t.className.match(/tab-content/)&&me.$){var r=!n.parentNode.className.match(/js-active-content/);a(r),$(n).closest&&$(n).closest(".tabbed").bind("tab.change",function(){setTimeout(function(){r=!n.parentNode.className.match(/js-active-content/),a(r)})})}e.on("onHidden",function(){n.offsetHeight<=0&&n.offsetWidth<=0&&e.pause()})},ee=function(e,t,n){e.upNextPlaylist&&e.on("play",function(){if(("content-playback"===e.ads.state||"content-resuming"===e.ads.state)&&!e.fetchedUpNextPlaylistVideos){var o=function(){e.fetchedUpNextPlaylistVideos=!0;var o=t.categories&&t.categories[0],a=t.embedCode;e.capi.fetchRelatedVideos(e,o,a,n.domain,n.isNonMasthead)};setTimeout(o,5e3)}})},te=function(e){e.on("adstart",function(){var t,n=function(){var n=e.ima3&&e.ima3.currentAd,o=n&&n.remainingTime,a=n&&n.currentTime,r=n&&n.id;if("undefined"!=typeof o&&(clearInterval(t),o<=0||a<0||"VPAID"===r)){var i=e.ima3.adControlBar;i&&(i.currentTimeDisplay.hide(),i.durationDisplay.hide(),i.timeDivider.hide())}};t=setInterval(n,500)}),e.on("adend",function(){var t=e.ima3.adControlBar;t&&(t.currentTimeDisplay.show(),t.durationDisplay.show(),t.timeDivider.show())})},ne=function(e,t,n,o){function a(e){if(e.childNodes)for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t],o=!!n.style.width,a=!!n.style.height,r=!n.className,i="black"===n.style.backgroundColor,s=o&&a&&r&&i;s&&(n.style.display="none")}}function r(e){function t(){e.className=e.className.replace(/disable-blackbox/g,""),clearInterval(n)}var n=null;e.className=e.className+" disable-blackbox",n=setInterval(a.bind(null,e),100),setTimeout(t,1e3)}return function(a,i){var s=i.el,l="vms-playing",c="vms-paused";n(a,i,e),t(a),o(a),a.on("adsready",function(){this.ima3.adPlayer.on("ima3-complete",function(){var e=this.options_.contentPlayer;"content-playback"===e.ads.state&&e.removeClass("ima3-ad-loading")})}),a.one("firstplay",function(){videojs.removeClass(i.el,"vms-state-play"),a.autoplay(!0)}),a.on("play",function(){videojs.removeClass(s,c),videojs.addClass(s,l),e.isMobile||e.IS_IOS||"ad-playback"!==a.ads.state||a.pause(),e.IS_IOS&&r(this.el().parentElement)}),a.on("pause",function(){videojs.removeClass(s,l),videojs.addClass(s,c)}),a.on("ended",function(){videojs.removeClass(s,l),
videojs.removeClass(s,c)}),a.one("play",function(){var e=a.bigPlayButton.el();e.parentElement&&e.parentElement.removeChild(e)}),!e.IS_IOS&&e.isMobile&&a.on(["ads-ad-started","ads-pod-started"],function(){a.pause()})}}(s,Z,ee,te),oe=function(e,t){return function(n,o,a){var r=function(t){var n={};if(t){for(var o=0;o<t.length;o++){var a=t[o];a.imageType&&(n[a.imageType.toLowerCase()]=a.link)}var r=function(t){return t.replace(e.urlMashery,e.url3scale)};return"prod"!==e.env&&(n.hero=r(n.hero),n.thumbnail=r(n.thumbnail)),n.hero||n.thumbnail||n.source}};n.capi({environment:e.env,apiKey:e.apiKey[e.env]}),n.capi.fetchVideoDetails(o.embedCode,function(i){if(i){i.images&&(o.thumbnail=r(i.images));var s=o.el.querySelector(".poster img");if(!s&&o.thumbnail&&n.poster(o.thumbnail),i.ooyalaId&&(o.embedCode=i.ooyalaId,n.setEmbedCode(i.ooyalaId)),i.originalSource){var l=o.el.className;o.source=i.originalSource,o.isLongform=/oovvuu/i.test(i.originalSource),o.isPlaylist=/vms-playlist/.test(l),o.autoplay=!o.isLongform&&!o.isPlaylist&&!/vms-autoplay-off/.test(l)}if(i.categories){for(var c=0;c<i.categories.length;c++)i.categories[c]=i.categories[c].value.replace(/(^\/+|\/+$)/gi,"").split("/").pop();o.categories=i.categories}if(i.title){o.title=i.title,n.setTitle(i.title);var u=o.el.querySelector(".heading");u&&(u.innerHTML=i.title+'<span class="time">'+t(i.duration/1e3)+"</span>")}if(i.description){o.description=i.description;var d=o.el.querySelector(".description p");d&&(d.innerHTML=i.description)}i.duration&&(o.capiDuration=i.duration/1e3,n.setCapiDuration(o.capiDuration)),i.time&&"undefined"!=typeof i.time.cuepoints&&i.time.cuepoints.length>0&&(o.adCuePoints=i.time.cuepoints,n.setAdCuePoints(i.time.cuepoints)),o.continuousPlay=!e.blockContinuousPlay}a(o)})}}(s,m),ae=function(e,t){var n=t.querySelector(".poster img"),o=function(e){return e.replace(s.urlMashery,s.url3scale)};n&&(n.attributes.src?n=n.attributes.src.value:n.attributes["data-src"]&&(n=n.attributes["data-src"].value),"prod"!==s.env&&(n=o(n)),e.poster(n))},re=function(e,t,n,o,a){return function(r,i){var s=i.el;r.playOrder=1,r.isPlaylist=/vms-playlist/i.test(s.className),r.abCookieValue=videojs.cookies&&videojs.cookies.getItem(e.abTestingCookieName)||"not-set",r.upNextPlaylist=!r.isPlaylist,r.playlistDisablePlayAll=/vms-disable-play-all/i.test(s.className),r.isEmbedded=/vms-standalone/i.test(s.className),r.setEmbedCode=function(e){if(e)return this.currentEmbedCode=e,this},r.getEmbedCode=function(){return this.currentEmbedCode},r.setTitle=function(e){if(e)return this.title=e,this},r.getTitle=function(){return this.title},r.setCapiDuration=function(e){if(e)return this.capiDuration=e,this},r.getCapiDuration=function(){return this.capiDuration},r.setAdCuePoints=function(e){if(e)return this.adCuePoints=e,this},r.getAdCuePoints=function(){return this.adCuePoints},o(r,i,function(e){i=e,t(r,i),n(r,i)}),a(r,s),/MSIE 9/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||(r.controlBar.fullscreenToggle.addClass("active"),r.on("ima3-ready",function(){r.ima3.adControlBar.fullscreenToggle.addClass("active")})),r.el().addEventListener("contextmenu",function(e){e.preventDefault(),e.stopPropagation()});var l=new RegExp(/AppleWebKit\/([\d.]+)/),c=l.exec(videojs.USER_AGENT),u=null===c?null:parseFloat(l.exec(videojs.USER_AGENT)[1]),d=new RegExp(/Chrome\/([\d.]+)/),f=d.exec(videojs.USER_AGENT),p=null===f?null:parseFloat(d.exec(videojs.USER_AGENT)[1]);videojs.IS_ANDROID_PHONE=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i.test(videojs.USER_AGENT),videojs.IS_ANDROID_TABLET=videojs.IS_ANDROID&&!videojs.IS_ANDROID_PHONE,videojs.IS_ANDROID_NATIVE_BROWSER=videojs.IS_ANDROID&&null!==u&&u<537||null!==p&&p<37}}(s,X,ne,oe,ae),ie=function(e,t,n){var o,a=0,r=ve.getElementsByTagName("script")[0].parentNode,i=function(){a++||(n&&n(),r.removeChild(o))};t&&(e=s.basePath+e),o=ve.createElement("script"),o.src=e,o.onload=i,o.onerror=i,o.async=!0,o.onreadystatechange=function(){/loaded|complete/i.test(this.readyState)&&i()},r.insertBefore(o,r.firstChild)},se=function(e){for(var t=0;t<ve.styleSheets.length;t++)if(ve.styleSheets[t].href===e)return;var n=ve.createElement("link");n.rel="stylesheet",n.href=e,n.media="only x";var o=ve.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o),setTimeout(function(){n.media="all"},0)},le=function(e,t,n){return function(o){n(e.playerCss),t(e.playerData.bcScript,!1,function(){t("//players.brightcove.net/videojs-ima3/2/videojs.ima3.min.js",!1,function(){t(e.akamaiAnalyticsConfig.jsPath,!1,function(){t("videojs.plugins.min.js",!0,function(){o()})})})})}}(s,ie,se),ce=function(e,t,n){var o,a,r,i,l,c;for(l=t;ve.getElementById("elemId");)l+="_"+Math.round(100*Math.random())+1;if(e)c=e instanceof HTMLElement?e:ve.querySelector(e);else{var u=0;for(c=ve.querySelectorAll('[vms-embedcode="'+t+'"]:not(.vms-ready)');c[u]&&c[u].querySelector("video")&&u<c.length;)u++;c=c[u]}if("boolean"==typeof n&&n===!1&&(c.className+=" vms-autoplay-off"),!c)return{videoEl:he,wrapperEl:he,id:l};o=ve.createElement("div"),o.className="videoWrapper",a=ve.createElement("div"),a.className="vms-controls",a.innerHTML='<div class="vms-center">   <a class="vms-btn-loading"></a></div>';var d=ve.createElement("video");d.setAttribute("id",l),d.setAttribute("class","video-js"),d.setAttribute("data-account",s.playerData.accountId),d.setAttribute("data-player",s.playerData.playerId),d.setAttribute("data-embed","default"),d.setAttribute("controls","true"),d.setAttribute("preload","none"),o.insertBefore(d,o.firstChild);var f=c.querySelector(".description");f||(i=ve.createElement("div"),i.className="module-content",i.innerHTML='<div class="description"><p></p></div>',c.insertBefore(i,c.firstChild));var p=c.querySelector(".heading");return p||(r=ve.createElement("div"),r.className="module-header vms-header",r.innerHTML='<h3 class="heading"><span class="time"></span></h3>',c.insertBefore(r,c.firstChild)),c.insertBefore(a,c.firstChild),c.insertBefore(o,c.firstChild),{videoEl:d,wrapperEl:c,id:l}},ue=function(e,t,n){return function(){me._vms_queue=me._vms_queue||[];var o=function(t,n){console.log("post processing video to queue",t.embedCode);var o,r=n.id,i=me.videojs.players[r];e(i,{el:n.wrapperEl,embedCode:t.embedCode});var s=function(){return!!i._waitingToProcess&&(delete i._queueProcessed,clearTimeout(o),t.callback&&t.callback(i),me._vms_queue.splice(0,1),void(me._vms_queue.length>0?a(me._vms_queue[0]):console.log("finished processing queue")))};i._waitingToProcess=!0,i.one("error",s),i.one("loadstart",s),o=setTimeout(s,3e3)},a=function(e){console.log("processing video to queue",e.embedCode);var a=n(e.target,e.embedCode,e.autoplay);return a.videoEl?void(me._bcLoaded?(me.bc(a.videoEl),o(e,a)):t(function(){me._bcLoaded=!0,o(e,a)})):console.error("Failed to initialise video ("+e.embedCode+") - check if embedCode or element is defined.")},r=function(e){me._vms_queue.push(e),console.log("video added to queue",e.embedCode),1===me._vms_queue.length&&a(me._vms_queue[0])};return{addVideoToQueue:r}}}(re,le,ce),de=function(e,t,n,o,a,r){return{init:function(){me._vms=me._vms||[];var i=function(){for(var e=ve.querySelectorAll("[vms-embedcode]:not(.vms-ready):not(.vms-list-item)"),t=0;t<e.length;t++){var n=e[t];me._vms.push({embedCode:n.getAttribute("vms-embedcode")})}},s=function(){for(var e=ve.querySelectorAll(".vms-container:not(.vms-playlist-loaded)"),t=function(e){me._vms.push({embedCode:e})},o=0;o<e.length;o++){var a=e[o];return void n.createPlaylist(a,t)}},l=function(){var n=ve.querySelectorAll(".vcms");if(n.length)for(var o=function(n){e(n,function(e){t(n),me._vms.push({embedCode:e})})},a=0;a<n.length;a++)o(n[a])},c=function(){l(),i(),s()},u=a();o("_vms",function(e){u.addVideoToQueue(e)}),me.vmsInit=c,c(),ve.querySelector(".vms-playlist-module")&&r("hub.js",!0)}}}(c,u,L,k,ue,ie),fe=function(){if(function(){var e=function(){};me.console||(me.console={log:e,info:e,warn:e,debug:e,error:e})}(),!me.atob){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";me.atob=function(t){for(var n,o,a=String(t).replace(/=+$/,""),r=0,i=0,s="";o=a.charAt(i++);~o&&(n=r%4?64*n+o:o,r++%4)?s+=String.fromCharCode(255&n>>(-2*r&6)):0)o=e.indexOf(o);return s}}Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=n.length;return function(a){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError("Object.keys called on non-object");var r=[];for(var i in a)e.call(a,i)&&r.push(i);if(t)for(var s=0;s<o;s++)e.call(a,n[s])&&r.push(n[s]);return r}}()),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,o=function(){},a=function(){return n.apply(this instanceof o?this:e,t.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,a.prototype=new o,a}),function(e,t){function n(t,n){var o=this;return o.attachEvent("on"+t,function(t){var a=t||e.event;a.preventDefault=a.preventDefault||function(){a.returnValue=!1},a.stopPropagation=a.stopPropagation||function(){a.cancelBubble=!0},n.call(o,a)})}e.addEventListener||(t.addEventListener=n,e.addEventListener=n,"Element"in e&&(e.Element.prototype.addEventListener=n))}(me,ve),ve.createElement("video"),Array.prototype.map||(Array.prototype.map=function(e,t){var n,o,a;if(null===this)throw new TypeError(" this is null or not defined");var r=Object(this),i=r.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(t&&(n=t),o=new Array(i),a=0;a<i;){var s,l;a in r&&(s=r[a],l=e.call(n,s,a,r),o[a]=l),a++}return o}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!me.requestAnimationFrame;++n)me.requestAnimationFrame=me[t[n]+"RequestAnimationFrame"],me.cancelAnimationFrame=me[t[n]+"CancelAnimationFrame"]||me[t[n]+"CancelRequestAnimationFrame"];me.requestAnimationFrame||(me.requestAnimationFrame=function(t,n){var o=(new Date).getTime(),a=Math.max(0,16-(o-e)),r=me.setTimeout(function(){t(o+a)},a);return e=o+a,r}),me.cancelAnimationFrame||(me.cancelAnimationFrame=function(e){clearTimeout(e)})}()}(),function(e){e.init()}(de),pe=he}(window,document,"__BUILD_VERSION__","player.js")}();